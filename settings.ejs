
<html>
<head>
    <title>Dashboard | Announcment Bar Maker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://assets.apphero.co/js/jscolor.min.js"></script>
    <script type="text/javascript" src="https://assets.apphero.co/js/jquery.fontselect.min.js"></script>
    <script type="text/javascript" src="https://assets.apphero.co/js/icon-selector.min.js"></script>
    <script type="text/javascript" src="https://assets.apphero.co/js/rangeslider.min.js"></script>
    <script type="text/javascript" src="https://assets.apphero.co/js/jquery.dm-uploader.min.js"></script>
    <script type="text/javascript" src="https://assets.apphero.co/js/selectize.min.js"></script>
    <script src="https://assets.apphero.co/js/jquery-modal.min.js"></script>
    <script src="https://assets.apphero.co/js/soon.min.js"></script>
    <script src="https://assets.apphero.co/js/soon.module.js"></script>
    <script type="text/javascript" src="js/index.js"></script>

    <link type="text/css" rel="stylesheet" href="https://assets.apphero.co/css/uptown.min.css" />
    <link type="text/css" rel="stylesheet" href="https://assets.apphero.co/css/style.css" />
    <link rel="stylesheet" href="https://assets.apphero.co/css/soon.min.css" />
    <link rel="stylesheet" href="https://assets.apphero.co/css/bar_prev.css" />
    <link type="text/css" rel="stylesheet" href="https://assets.apphero.co/css/fontselect.min.css" />
    <link type="text/css" rel="stylesheet" href="https://assets.apphero.co/css/jquery.fonticonpicker.min.css" />
    <link type="text/css" rel="stylesheet" href="https://assets.apphero.co/css/jquery.fonticonpicker.grey.min.css" />
    <link type="text/css" rel="stylesheet" href="https://assets.apphero.co/css/rangeslider.min.css" />
    <link rel="stylesheet" href="https://assets.apphero.co/css/icon-selector.css" />
    <link rel="stylesheet" href="https://assets.apphero.co/css/jquery.dm-uploader.min.css" />
    <link rel="stylesheet" href="https://assets.apphero.co/css/selectize.css" />
    <link rel="stylesheet" href="https://assets.apphero.co/css/jquery-modal.min.css" />


    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.9/css/all.css" integrity="sha384-5SOiIsAziJl6AWe0HWRKTXlfcSHKmYV4RBF18PPJ173Kzn7jzMyFuTtk8JA7QQG1" crossorigin="anonymous">



    <link rel="apple-touch-icon" sizes="180x180" href="https://assets.apphero.co/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://assets.apphero.co/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://assets.apphero.co/favicon/favicon-16x16.png">
    <link rel="manifest" href="https://assets.apphero.co/favicon/site.webmanifest">
    <link rel="mask-icon" href="https://assets.apphero.co/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#603cba">
    <meta name="theme-color" content="#ffffff">
</head>
<body>


<!--<header>
  <h1>Announcment Bar Maker</h1>
</header>

  <section>
    <div class="column">
  <div class="card">
  <a href="#" style="float:right;">Help</a>
</div>
</div>
</section>-->
<div class="header-container">
    <div class="header-bar">
        <span class="apphero-logo"></span>
    </div>
</div>
<div class="side-bar">
    <div class="app-block-holder">
        <div class='app-block'>
            <span class="app-block-logo" style="background-image:url('https://apps.shopifycdn.com/listing_images/9c396fcdde632fcb6d226b61f3f5ee71/icon/b06af5b86cb6dc95b286dff5e50dec33.jpg?height=168&quality=90&width=168')"></span>
            <p>
                Announcement Bar Builder ‑ Top</p>
        </div>
    </div>
    <div class="more-apps-holder">
        <span class="more-apps-title">MORE APPS</span>
        <a href="https://apps.shopify.com/budget-trust" target="_blank" class='more-apps-block'>

            <span class="more-apps-logo" style="background-image:url('https://apps.shopifycdn.com/listing_images/02afe5a6988e88e73acf7f6a90641fcc/icon/01f3c8d45e147ee7cf097ba2d4fd3c7d.png?height=168&width=168')"></span>
            <p>TRUSTY ONE‑Trust Badges Icons</p>
            <span class="more-apps-price">Free</span>
            <span class="more-apps-description">Product Badges-Over 1200 payment badges and icons</span>
        </a>
        <a href="https://apps.shopify.com/budget-trust" target="_blank" class='more-apps-block'>
            <span class="more-apps-logo" style="background-image:url('https://apps.shopifycdn.com/listing_images/67c280a9e06de424c882c9e641479e21/icon/a1f86ef0c6d834b5c0b5ec3c671c633e.png?height=168&width=168')"></span>
            <p>TheBadges‑Payment Icons Footer</p>
            <span class="more-apps-price">Free</span>
            <span class="more-apps-description">Add, remove and reorganize payment icons in store footer</span>
        </a>
    </div>
</div>


<div class="main-content">
    <div class="content-menu-holder">
        <div class="content-menu">
            <ul class="menu-items">
                <li class="item-dashboard selected"><a href="/">Dashboard</a></li>
                <li class="item-help"><a href="mailto:contact@salbimy.app" target="_blank">Help</a></li>
            </ul>

        </div>
    </div>

    <section class="preview-section" style="display:none;">
        <div class="card preview-card">
            <p>PREVIEW</p>
            <!--  <iframe id="iframenew_bar" src="" class="preview_frame" onload="resizeIframe(this);" scrolling="no"></iframe>-->
        </div>
    </section>

    <section style="overflow:hidden; margin-top:20px; width:98%; padding-top:0;">
        <button class="createBtn">+ Create New Bar</button>
    </section>


    <script>

        let data = <%- JSON.stringify(data) %>
        // let finaldata = JSON.parse(data[1].data)
       console.log(data);
    </script>
    <% for(var i=0; i<data.length; i++) { %>
        <% var finaldata %>
        <% finaldata = JSON.parse(data[i].data) %>
    <section class="bar_settings" id='<%- data[i].bar_id %>' data-type=single>

        <div class="card main-card">

            <span class="tag <%= data[i].bar_statu==="activate" ? " green" : "grey" %>"><%= data[i].bar_statu==="activate" ? "active" : "Paused" %></span>

            <div class="preview">
                <div class="title-prev">
                    <h5><%- finaldata.name %></h5>
                </div>
                <div class="control-btns">
                    <button class='secondary toggle <%= data[i].bar_statu==="activate" ? " pause-btn fa fa-pause" : " play-btn fa fa-play" %>' data-hover='<%= data[i].bar_statu==="desactivate" ? "Deactivate" : "Activate" %>'></button>

                    <button class="secondary icon-edit edit-btn"></button>
                    <button class="secondary icon-trash btn-del"></button>

                </div>
            </div>
        </div>

        <div class="edit">


            <div class="section-container container-edit message-element"  data-state="open">

                <h4>Message Settings</h4>
                <p>Edit your message, font and icon</p>
                <div class="card">

                    <div class="section-container message-wrapper left-align" style="padding-top:10px;">
                        <h6>Announcement</h6>
                        <label>Message:</label>
                        <div class="row side-elements message-row">
                            <p class="barText" contenteditable="true" ><%- finaldata.message %></p>
                            <button class="bold-btn secondary" style='font-family:"Times New Roman", Times, serif; font-weight:bold;'>B</button>
                            <button class="italic-btn secondary" style='font-family:"Times New Roman", Times, serif; font-weight:bold; font-style:italic;'>I</button>
                            <!--<input type="text" value="jbjnb`djksfnbfzd" class="barText"/>-->
                        </div>



                        <div class="row">
                            <label>Font Style:</label>
                            <div class="column twelve">
                                <input class="fonts" name="fonts" id="fonts" value="<%- finaldata.font %>"/>
                            </div>
                        </div>

                        <div class="row">
                            <label>Font Size:</label>
                            <select class="font-size" <%=  finaldata.fontSize %>>
                                <option value="12"  <%= finaldata.fontSize==="12" ? "selected" : "" %> >12</option>
                                <option value="13" <%= finaldata.fontSize==="13" ? "selected" : "" %> >13</option>
                                <option value="14"  <%= finaldata.fontSize==="14" ? "selected" : "" %> >14</option>
                                <option value="15"   <%= finaldata.fontSize==="15" ? "selected" : "" %>>15</option>
                                <option value="16"  <%= finaldata.fontSize==="16" ? "selected" : "" %>>16</option>
                                <option value="17" <%= finaldata.fontSize==="17" ? "selected" : "" %> >17</option>
                                <option value="18" <%= finaldata.fontSize==="18" ? "selected" : "" %> >18</option>
                                <option value="19"  <%= finaldata.fontSize==="19" ? "selected" : "" %> >19</option>
                                <option value="20" <%= finaldata.fontSize==="20" ? "selected" : "" %> >20</option>
                                <option value="21" <%= finaldata.fontSize==="21" ? "selected" : "" %>  >21</option>
                                <option value="22"  <%= finaldata.fontSize==="22" ? "selected" : "" %> >22</option>
                                <option value="23"  <%= finaldata.fontSize==="23" ? "selected" : "" %> >23</option>
                                <option value="24"  <%= finaldata.fontSize==="24" ? "selected" : "" %>  >24</option>
                                <option value="25" <%= finaldata.fontSize==="25" ? "selected" : "" %>  >25</option>
                                <option value="26"  <%= finaldata.fontSize==="26" ? "selected" : "" %> >26</option>
                                <option value="27" <%= finaldata.fontSize==="27" ? "selected" : "" %> >27</option>
                                <option value="28"  <%= finaldata.fontSize==="28" ? "selected" : "" %> >28</option>
                                <option value="29" <%= finaldata.fontSize==="29" ? "selected" : "" %> >29</option>
                                <option value="30"  <%= finaldata.fontSize==="30" ? "selected" : "" %> >30</option>
                            </select>
                        </div>
                        <div class="row side-elements">
                            <label >Text Color:</label>
                            <input class="jscolor textColor colorShapes" id="textColor" value="<%- finaldata.textColor %>"/>
                        </div>

                    </div>



                    <div class="section-container container-edit right-align" style="margin-top:13px;">
                        <h6>Call To Action</h6>
                        <p>Encourage visitors to take action</p>


                        <div class="section-wrapper">
                            <div class="row">
                                <label>Call To Action Type:</label>
                                <select class="call_to_action_selector">
                                    <option  class="cta_radio"  value="0" <%= finaldata.cta_type===0 ? "selected" : "" %> />Disabled</option>
                                    <option  class="cta_radio"  value="1" <%= finaldata.cta_type===1 ? "selected" : "" %>  />Make entire bar clickable</option>
                                    <option  class="cta_radio"  value="2" <%= finaldata.cta_type===2 ? "selected" : "" %> />Add button on the bar</option>
                                    <option class="cta_radio"  value="3"  <%= finaldata.cta_type===3 ? "selected" : "" %>  />Add a simple link</option>
                                    <option  class="cta_radio"  value="4" <%= finaldata.cta_type===4 ? "selected" : "" %>  />Add coupon placement</option>
                                </select>
                            </div>
                        </div>

                        <div class="section-wrapper clickable_bar_prefs" style="display:none;">

                            <div class="row">
                                <label>Click Target URL:</label>
                                <input type="text" class="barTarget" value="<%- finaldata.barTarget %>" placeholder="http://myawesomeshop.com" />
                            </div>
                            <div class="row">
                                <div class="row">
                                    <label>Link Behaviour:</label>
                                    <select class="linkType">
                                        <option value="same"  <%= finaldata.linkType==="same" ? "selected" : "" %>  >Open link in the same window</option>
                                        <option value="new" <%= finaldata.linkType==="new" ? "selected" : "" %>  >Open link in a new window</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="section-wrapper button_prefs" style="display:none;">

                            <div class="row">
                                <label>Button Text:</label>
                                <input type="text" class="btnText" value="<%=finaldata.btnText %>" maxlength="16"/>

                            </div>
                            <div class="row">
                                <label>Button Style:</label>
                                <select class="button_style" >
                                    <option value="solid" <%= finaldata.btn_style==="solid" ? "selected" : "" %> >Square Solid</option>
                                    <option value="hollow" <%= finaldata.btn_style==="hollow" ? "selected" : "" %>   >Square Hollow</option>
                                    <option value="rounded-solid-btn" <%= finaldata.btn_style==="rounded-solid-btn" ? "selected" : "" %>    >Rounded Solid</option>
                                    <option value="rounded-hollow-btn" <%= finaldata.btn_style==="rounded-hollow-btn" ? "selected" : "" %>   >Rounded Hollow</option>
                                </select>
                            </div>
                            <div class="row">
                                <label>Button Target URL:</label>
                                <input type="text" class="btnTarget" value="<%= finaldata.btnTarget %>" placeholder="http://myawesomeshop.com"/>
                            </div>
                            <div class="row">
                                <div class="row">
                                    <label>Link Behaviour:</label>
                                    <select class="linkType"  >
                                        <option value="same"  <%= finaldata.linkType==="same" ? "selected" : "" %>>Open link in the same window</option>
                                        <option value="new"   <%= finaldata.linkType==="new" ? "selected" : "" %> >Open link in a new window</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row side-elements">

                                <label>Button Color:</label>
                                <input class="jscolor btnColor colorShapes" value="<%= finaldata.btnColor%>"/>


                                <label style="margin-left:3em">Button Text Color:</label>
                                <input class="jscolor btnTextColor colorShapes" value="<%= finaldata.btnTextColor %>"/>

                            </div>
                        </div>

                        <div class="section-wrapper slink_prefs" style="display:none;">

                            <div class="row">
                                <label>Link Text:</label>
                                <input type="text" class="slinkText" value="<%= finaldata.btnText %>" maxlength="16"/>

                            </div>
                            <div class="row">
                                <label>Link Target URL:</label>
                                <input type="text" class="slinkTarget" value="<%= finaldata.btnTarget %>" placeholder="http://myawesomeshop.com"/>
                            </div>
                            <div class="row">
                                <label>Link Behaviour:</label>
                                <select class="linkType">
                                    <option value="same"  <%= finaldata.linkType==="same" ? "selected" : "" %>>Open link in the same window</option>
                                    <option value="new"  <%= finaldata.linkType==="same" ? "selected" : "" %>>Open link in a new window</option>

                                </select>
                            </div>
                            <div class="row side-elements">

                                <label>Link Text Color:</label>
                                <input class="jscolor slinkTextColor colorShapes" value="<%= finaldata.btnTextColor%>"/>

                            </div>
                        </div>

                        <div class="section-wrapper coupon_prefs" style="display:none;">

                            <div class="row">
                                <label>Coupon Text:</label>
                                <input type="text" class="couponText" value="<%= finaldata.btnText%>" maxlength="16"/>

                            </div>

                            <div class="row">
                                <label>Coupon Style:</label>
                                <select class="coupon_style">
                                    <option value="square-dashed"  <%= finaldata.btn_style==="square-dashed" ? "selected" : "" %> >Square Dashed</option>
                                    <option value="square-solid"  <%= finaldata.btn_style==="square-solid" ? "selected" : "" %> >Square Solid</option>
                                    <option value="rounded-dashed" <%= finaldata.btn_style==="rounded-dashed" ? "selected" : "" %> >Rounded Dashed</option>
                                    <option value="rounded-solid"   <%= finaldata.btn_style==="rounded-solid" ? "selected" : "" %> >Rounded Solid</option>
                                </select>
                            </div>

                            <div class="row side-elements">

                                <label>Border Color:</label>
                                <input class="jscolor couponColor colorShapes" value="<%= finaldata.btnColor%>"/>


                                <label style="margin-left:3em">Text Color:</label>
                                <input class="jscolor couponTextColor colorShapes" value="<%= finaldata.btnTextColor%>"/>

                            </div>
                        </div>


                    </div>


                    <div class="section-container left-align" style="clear:left; padding-top:15px;">
                        <h6>ICON</h6>
                        <p>Add an icon next to your message</p>
                        <div class="row">
                            <label style="display:none;"><input id="hasIcon" class="hasIcon" type="checkbox" checked/>
                                Show Icon</label>
                        </div>

                        <div class="row side-elements">
                            <label>Icon Style:</label>
                            <i class="icon-preview-holder <%= finaldata.icon %>"></i>
                            <i class="icon-close-circle remove-icon" style="display:none;"></i>
                            <a class="icon-selector" >Choose icon</a>

                            <!-- <i class="icon-edit icon-selector"></i> -->

                            <input class="icon-placeholder icon" name="icon" type="hidden" value="<%= finaldata.icon %>" />

                        </div>

                        <div class="row side-elements">
                            <label>Icon Color:</label>
                            <input class="jscolor iconColor colorShapes" value="<%= finaldata.iconColor %>"/>

                        </div>
                    </div>

                </div>
            </div>


            <div class="section-container container-edit">
                <h4>Basic Settings</h4>
                <p>Your bar's basic settings</p>
                <div class="grid">

                    <div class="card">
                        <div class="row">
                            <label>Name:</label>
                            <input type="text" value="<%= finaldata.name %>" class="barName"/>

                        </div>
                        <div class="section-wrapper">
                            <h6>BACKGROUND</h6>
                            <div class="row side-elements">
                                <label>Background Color:</label>
                                <input class="jscolor bgColor colorShapes" value="<%= finaldata.bgColor %>"/>
                            </div>

                            <div class="row">
                                <div class="slidecontainer">
                                    <label class="opacity-label">Opacity: <script>document.write(Math.floor('0.6'*100) + '%')</script></label>
                                    <input type="range" min="0.1" max="1" value="<%= finaldata.opacity %>" step="0.05" class="slider opacity">
                                </div>
                            </div>

                            <label>Background Image:<a class="clearBgImage" >Clear</a></label>
                            <br />
                            <div class="row side-elements">
                                <span class="nav-left"></span>
                                <div class="slider-parent">
                                    <div class="slider-wrapper">
 <div class="slide-card" data-name="1.png" style="background:url('images/templates/1.png');"></div>
                                   <div class="slide-card" data-name="2.png" style="background:url('images/templates/2.png');"></div>
                                   <div class="slide-card" data-name="3.png" style="background:url('images/templates/3.png');"></div>
                                 <div class="slide-card" data-name="4.png" style="background:url('images/templates/4.png');"></div>
                                  <div class="slide-card" data-name="5.png" style="background:url('images/templates/5.png');"></div>
                                  <div class="slide-card" data-name="6.png" style="background:url('images/templates/6.png');"></div>
                                  <div class="slide-card" data-name="7.png" style="background:url('images/templates/7.png');"></div>
                                   <div class="slide-card" data-name="8.png" style="background:url('images/templates/8.png');"></div>
                                <div class="slide-card" data-name="9.png" style="background:url('images/templates/9.png');"></div>
                                  <div class="slide-card" data-name="10.png" style="background:url('images/templates/10.png');"></div>
                                <div class="slide-card" data-name="11.png" style="background:url('images/templates/11.png');"></div>
                                   <div class="slide-card" data-name="12.png" style="background:url('images/templates/12.png');"></div>
                            <div class="slide-card" data-name="13.png" style="background:url('images/templates/13.png');"></div>
                                 <div class="slide-card" data-name="14.png" style="background:url('images/templates/14.png');"></div>
                                 <div class="slide-card" data-name="15.png" style="background:url('images/templates/15.png');"></div>
                                <div class="slide-card" data-name="16.png" style="background:url('images/templates/16.png');"></div>
                             <div class="slide-card" data-name="17.png" style="background:url('images/templates/17.png');"></div>
                           <div class="slide-card" data-name="18.png" style="background:url('images/templates/18.png');"></div>
                                   <div class="slide-card" data-name="19.png" style="background:url('images/templates/19.png');"></div>
                                    <div class="slide-card" data-name="20.png" style="background:url('images/templates/20.png');"></div>
                                   <div class="slide-card" data-name="21.png" style="background:url('images/templates/21.png');"></div>
                                 <div class="slide-card" data-name="22.png" style="background:url('images/templates/22.png');"></div>
                             <div class="slide-card" data-name="23.png" style="background:url('images/templates/23.png');"></div>
                             <div class="slide-card" data-name="24.png" style="background:url('images/templates/24.png');"></div>
                             <div class="slide-card" data-name="25.png" style="background:url('images/templates/25.png');"></div>
                                <div class="slide-card" data-name="26.png" style="background:url('images/templates/26.png');"></div>
                               <div class="slide-card" data-name="27.png" style="background:url('images/templates/27.png');"></div>
                              <div class="slide-card" data-name="28.png" style="background:url('images/templates/28.png');"></div>
                                  <div class="slide-card" data-name="29.png" style="background:url('images/templates/29.png');"></div>
                                  <div class="slide-card" data-name="30.png" style="background:url('images/templates/30.png');"></div>
                            <div class="slide-card" data-name="31.png" style="background:url('images/templates/31.png');"></div>
                               <div class="slide-card" data-name="32.png" style="background:url('images/templates/32.png');"></div>
                            <div class="slide-card" data-name="33.png" style="background:url('images/templates/33.png');"></div>
                                  <div class="slide-card" data-name="34.png" style="background:url('images/templates/34.png');"></div>
                                <div class="slide-card" data-name="35.png" style="background:url('images/templates/35.png');"></div>
                                <div class="slide-card" data-name="36.png" style="background:url('images/templates/36.png');"></div>
                              <div class="slide-card" data-name="37.png" style="background:url('images/templates/37.png');"></div>
                                <div class="slide-card" data-name="38.png" style="background:url('images/templates/38.png');"></div>
                               <div class="slide-card" data-name="39.png" style="background:url('images/templates/39.png');"></div>
                                 <div class="slide-card" data-name="40.png" style="background:url('images/templates/40.png');"></div>
                                  <div class="slide-card" data-name="41.png" style="background:url('images/templates/41.png');"></div>
                                 <div class="slide-card" data-name="42.png" style="background:url('images/templates/42.png');"></div>
                <div class="slide-card" data-name="43.png" style="background:url('images/templates/43.png');"></div>
                                <div class="slide-card" data-name="44.png" style="background:url('images/templates/44.png');"></div>
                           <div class="slide-card" data-name="45.png" style="background:url('images/templates/45.png');"></div>
             <div class="slide-card" data-name="46.png" style="background:url('images/templates/46.png');"></div>
                                    </div>
                                </div>
                                <span class="nav-right"></span>
                            </div>
                            <div class="row upload-zone" style="display: none">

                                <input type="file" title="Click to add Files" class="file-input">
                                <input type="hidden" class="img" value="<%= finaldata.bgImage %>" />
                                <img src="https://assets.apphero.co/images/loading.gif" width="24" hight="24" class="loading" style="display:none;" />

                                <p class="upload-error"></p>
                                <p>(JPG, PNG or GIF, max size:100kb)</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="section-wrapper">
                            <h6>POSITION</h6>
                            <div class="row">
                                <label>Bar Position:</label>
                                <select id="posSelector" class="posSelector">
                                    <option value="top" <%= finaldata.position==="top" ? "selected" : "" %>  >Top</option>
                                    <option value="bottom"  <%= finaldata.position==="bottom" ? "selected" : "" %> >Bottom</option>
                                    <option value="custom"  <%= finaldata.position==="custom" ? "selected" : "" %> >custom</option>
                                </select>

                            </div>

                            <div class="code-row row" style="display:none;">
                                Copy the tag below and paste it into your theme where you'd like the bar to appear:
                                <a target="_blank" href="https://help.apphero.co/article/31-how-to-insert-the-bar-in-a-custom-location">Learn more</a>
                                <br/><br />
                                <div class="row side-elements markdown">
                                    <div id="markdown-body" class="markdown-body">
                                        &lt;div class='aph_bar_wrapper'&gt;&lt;/div&gt;
                                    </div>
                                    <div class="tooltip">
                                        <button onclick="copyText()" onmouseout="outFunc()">
                                            <span class="tooltiptext" id="myTooltip">Copy</span>
                                            Copy
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <label>
                                    <input type="checkbox" <%= finaldata.posOnTop===true ? "checked" : "" %> class="posOnTop" />
                                    Bar moves with scroll
                                </label>
                            </div>
<script>

  console.log(  <%- JSON.stringify(finaldata.countryOptions)%>)
</script>
                        </div>
                        <div class="section-wrapper">
                            <h6>EXTRA FUNCTIONS</h6>
                            <div class="row">
                                <label>
                                    <input class="user_closable" type="checkbox"  <%= finaldata.user_closable === true ? "checked" : "" %>/>
                                    Bar can be hidden</label>
                            </div>
                            <div class="row">
                                <label>Hide Button Style:</label>
                                <select class="bar_dismiss_style"  disabled="true">
                                    <option value="Light"  <%= finaldata.bar_dismiss_style==="Light" ? "selected" : "" %> >Light</option>
                                    <option  value="Dark"  <%= finaldata.bar_dismiss_style==="Dark" ? "selected" : "" %>  >Dark</option>
                                </select>
                            </div>
                        </div>
                    </div>




                </div>
            </div>


            <div class="section-container container-edit" >

                <h4 class="locked-heading">Targeting
                </h4>

                <p class="locked-subheading">Show the bar to specific users</p>
                <div class="grid targeting-grid" style="opacity:1;" data-plan="PRO" >
                    <div class="card">
                        <div class="section-wrapper">
                            <h6>Page Targeting</h6>
                            <p>Choose which pages to have the bar</p>
                            <div class="row">
                                <select class="page-target" >
                                    <option value="all" <%= finaldata.pageTarget==="all" ? "selected" : "" %>  >Show on every page</option>

                                    <option value="home" <%= finaldata.pageTarget==="home" ? "selected" : "" %>  >Show on home page only</option>

                                    <option value="collection"  <%= finaldata.pageTarget==="collection" ? "selected" : "" %> >Show on collections only</option>

                                    <option value="product"  <%= finaldata.pageTarget==="product" ? "selected" : "" %> >Show on products only</option>

                                    <<option value="custom"  <%= finaldata.pageTarget==="custom" ? "selected" : "" %>    >Custom page</option>

                                </select>
                            </div>
                            <div id="customPageRow<%= data[i].bar_id%>" class="row customPageRow" style="  <%=  finaldata.pageTarget==="custom"? 'display:block;':'display:none;' %>">
                                <label>Page URL:</label>
                                <input id="customPageURL<%= data[i].bar_id%>" name="customPageURL" class="customPageURL selectized" id="red12back" value= '' type="text" />
                                <script>
                                    var options = {};
                                    var selected = [];
                                    options['<%= data[i].bar_id%>'] = [];
                                    selected['<%= data[i].bar_id%>'] = [];
                                    masterPages['<%= data[i].bar_id%>'] = [];
                                    masterGeo['<%= data[i].bar_id%>'] = [];
                                    masterDomains['<%= data[i].bar_id%>'] = [];
                                    /*  */




                                    $(function(){
                                        var $select = $('#customPageURL'+'<%= data[i].bar_id%>').selectize({
                                            plugins: ['remove_button'],
                                            create:true,


                                            onInitialize:function() {
                                                let arroptions = <%- finaldata.pageTargetOptions %>
                                                if(arroptions.length>0)
                                                {
                                                    console.log(arroptions)
                                                    for (var i = 0;
                                                         i < arroptions.length; i++) {
                                                        this.addOption({'value':arroptions[i]});
                                                        selected.push(arroptions[i]);
                                                    }

                                                }
                                                this.setValue(selected);

                                            },


                                            onItemAdd:function(value,$item) {
                                                masterPages['<%= data[i].bar_id%>'].push(value);
                                            },
                                            onItemRemove:function(value){
                                                var index = masterPages['<%= data[i].bar_id%>'].indexOf(value);
                                                if (index !== -1 ) { masterPages['<%= data[i].bar_id%>'].splice(index,1); }
                                            },
                                            valueField: 'value',
                                            labelField: 'value',
                                            searchField: 'value',


                                        });

                                        var selectedDomain = [];
                                        var $selectDomain = $('#domain'+'<%= data[i].bar_id%>').selectize({
                                            plugins: ['remove_button'],
                                            create:true,


                                            onInitialize:function() {

                                                this.setValue(selectedDomain);

                                            },

                                            onItemAdd:function(value,$item) {
                                                masterDomains['<%= data[i].bar_id%>'].push(value);
                                            },
                                            onItemRemove:function(value){
                                                var index = masterDomains['<%= data[i].bar_id%>'].indexOf(value);
                                                if (index !== -1 ) { masterDomains['<%= data[i].bar_id%>'].splice(index,1); }
                                            },
                                            valueField: 'value',
                                            labelField: 'value',
                                            searchField: 'value',


                                        });

                                        //var selectizes = $select[0].selectize;

                                        //selectizes.setValue(selected);

                                        var somedata;
                                        var selectedGeo = [];
                                        var $selectGeo = $('#geo'+'<%= data[i].bar_id%>').selectize({
                                            plugins: ['remove_button'],
                                            valueField:'alpha-2',
                                            labelField:'name',
                                            searchField:'name',
                                            onFocus:function() {
                                            },
                                            onInitialize:function() {

                                              somedata= <%- JSON.stringify(finaldata.countryOptions)%>
                                                    console.log(somedata)
                                                    somedata = JSON.parse(somedata)
                                                    console.log(somedata.length)
                                                if (somedata.length>0) {
                                                    for (let j = 0; j < somedata.length; j++) {
                                                        this.addOption(somedata[j]);
                                                        selectedGeo.push(somedata[j]['alpha-2']);

                                                    }


                                                }
                                                this.setValue(selectedGeo);

                                            },
                                            onChange:function(value,label) {

                                                if (value != "") {
                                                    var arr = value.split(',');
                                                    for (var i=0; i < arr.length;i++) {
                                                        var name = $('[data-value="' + arr[i] + '"]').text();
                                                        name = name.substr(0,name.length-1);
                                                        arr[i] = {'alpha-2':arr[i], 'name':name};

                                                    }
                                                    console.log(arr)
                                                    masterGeo['<%= data[i].bar_id%>'] = arr;
                                                }
                                                else {
                                                    masterGeo['<%= data[i].bar_id%>'] = [];
                                                }


                                            },
                                            load:function(query, callback) {
                                                if (!query.length) return callback();
                                                $.ajax({
                                                    url: 'https://apphero.co/templates/countries.json',
                                                    type: 'GET',
                                                    dataType: 'json',
                                                    data: {
                                                        name: query,
                                                    },
                                                    error: function() {
                                                        callback();
                                                    },
                                                    success: function(res) {
                                                        callback(res);
                                                    }
                                                });
                                            }
                                        });


                                    });
                                </script>
                            </div>
                        </div>
                        <br/>
                        <div class="section-wrapper">
                            <h6>Subdomain Targeting</h6>
                            <p>Show your bar on specific subdomains</p>
                            <div class="row">
                                <select class="domain-target">
                                    <option value="all" <%= finaldata.domainTarget === "all" ? "selected" : ""  %> >Display on all subdomains</option>
                                    <option value="specific" <%= finaldata.domainTarget === "specific" ? "selected" : ""  %>>Display on specific subdomains</option>
                                    <option value="main" <%= finaldata.domainTarget === "main" ? "selected" : ""  %>>Display on main domain only</option>
                                </select>
                                <div id="subDomainRow<%- data[i].bar_id %>" class="row" style="display:none;">
                                    <label>Subdomains: <a href='https://help.apphero.co/article/19-how-do-i-enter-my-subdomain-for-subdomain-targeting' target='_blank'>Learn More</a></label>
                                    <input id="domainnew_bar<%- data[i].bar_id %>" class="domainTarget" value="<%= finaldata.domainTarget %>" name="domainTarget" type="text" />
                                </div>
                            </div>
                        </div>
                        <br/>
                        <div class="section-wrapper">
                            <h6>DEVICE TARGETING</h6>
                            <p>Show the bar on certain device types</p>
                            <div class="row">

                                <input class="cta_radio device_radio" name="device_target-<%- data[i].bar_id %>" type="radio" value="0" <%= finaldata.cta_type=== 0 ? "checked" : "" %>   />Show on all devices<br/>
                                <input class="cta_radio device_radio" name="device_target-<%- data[i].bar_id %>" type="radio" value="1"  <%= finaldata.cta_type=== 1 ? "checked" : "" %> />Show on desktop only<br/>
                                <input class="cta_radio device_radio" name="device_target-<%- data[i].bar_id %>" type="radio" value="2"  <%= finaldata.cta_type=== 2 ? "checked" : "" %> />Show on mobile only<br/>

                            </div>
                        </div>

                    </div>

                    <div class="card">
                        <div class="section-wrapper">
                            <h6>Geotargeting</h6>
                            <p>Show the bar to people living in certain countries</p>
                            <label>Countries:</label>
                        <script>
                        </script>
                            <input id="geo<%= data[i].bar_id %>" class="geoTarget" value="" name="geoTarget" type="text" />
                        </div>
                        <br />
                        <div class="section-wrapper">
                            <h6>User Source Targeting</h6>
                            <p>Show the bar to visitors coming from a specific website</p>
                            <div class="row">
                                <label>Source:</label>
                                <select class="user_source">
                                    <option value="disabled" <%= finaldata.source_mode==="disabled" ? "selected" : "" %>  >All Sources</option>
                                    <option value="facebook.com"  <%= finaldata.source_mode==="facebook.com" ? "selected" : "" %>  >Facebook</option>
                                    <option value="instagram.com"  <%= finaldata.source_mode==="instagram.com" ? "selected" : "" %>  >Instagram</option>
                                    <option value="t.co"   <%= finaldata.source_mode==="t.co" ? "selected" : "" %>  >Twitter</option>
                                    <option value="google.com"  <%= finaldata.source_mode==="google.com" ? "selected" : "" %>  >Google</option>
                                    <option value="pinterest.com"  <%= finaldata.source_mode==="pinterest.com" ? "selected" : "" %>  >Pinterest</option>
                                    <option value="custom"  <%= finaldata.source_mode==="custom" ? "selected" : "" %>>Custom URL</option>
                                    <option value="utm"  <%= finaldata.source_mode==="utm" ? "selected" : "" %>>UTM Code</option>
                                </select>
                            </div>
                            <div class="row utm_row">
                                <label>UTM Code</label>
                                <input class="utm_val" name="utm_val" type="text" placeholder="ex:utm_source=email"/>
                            </div>
                            <div class="row source_url_row">
                                <label>UTM Code</label>
                                <input class="source_url" name="source_url" type="text" placeholder="domain.com"/>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="btns-container">
                <!--<button class="button btn-save" >Update</button>-->
                <button type="button" class="btn-save Polaris-Button Polaris-Button--primary"><span class="Polaris-Button__Content">
      <span>Save</span></span></button>
                <button class="secondary btn-cancel">Cancel</button>

            </div>

        </div>


        <input type="hidden" class="" value="<%= data[i].bar_id %>" />
    </section>
    <% } %>


        <script>
        let counterdata = <%- JSON.stringify(counterdata) %>
             console.log(counterdata);
    </script>
    <% for(var i=0; i<counterdata.length; i++) { %>
    <% datacounter = JSON.parse(counterdata[i].data) %>
       <% var counterPrefs = JSON.parse(datacounter.counterPrefs) %>
    <section class="bar-settings" id=<%- counterdata[i].bar_id %> data-type=counter>
        <div class="card main-card">

            <span class="tag <%= counterdata[i].bar_statu==="activate" ? " green" : "grey" %>"><%= counterdata[i].bar_statu==="activate" ? "active" : "Paused" %></span>
            <span class="tag orange pending">Countdown Timer</span>

            <div class="preview">
                <div class="title-prev">
                    <h5><%- datacounter.name %></h5>
                </div>
                <div class="control-btns">
                    <button class='secondary toggle <%= counterdata[i].bar_statu==="activate" ? " pause-btn fa fa-pause" : " play-btn fa fa-play" %>' data-hover='<%= counterdata[i].bar_statu==="desactivate" ? "Deactivate" : "Activate" %>'></button>
                    <button class="secondary icon-edit edit-btn"></button>
                    <button class="secondary icon-trash btn-del"></button>

                </div>
            </div>
        </div>



        <div class="edit-counter">

            <div class="section-container container-edit message-element" data-state="open">

                <h4>Countdown Timer Settings</h4>
                <p>Edit your countdown timer settings and style</p>
                <div class="card">
                    <div class="section-container section-wrapper message-wrapper left-align" style="padding-top:10px;">
                        <h6>TIMER</h6>


                        <div class="row side-elements" style="margin-bottom:0.5em;">

                            <label class="in-grid-label">Duration:</label>

                            <div class="grid duration-grid">
                                <div class="row">
                                    <label class="timer-duration-label">Days</label>
                                    <input class="timer-inputs daysInput" type="number" maxlength="3" min="0" value="<%- counterPrefs.days %>" onkeyup="if (/\D/g.test(this.value)) this.value = this.value.replace(/\D/g,'')"/>
                                </div>

                                <div class="row">
                                    <label class="timer-duration-label">Hours</label>
                                    <input class="timer-inputs hoursInput" type="number" maxlength="2" min="0" value="<%- counterPrefs.hours %>" onkeyup="if (/\D/g.test(this.value)) this.value = this.value.replace(/\D/g,'')"/>
                                </div>

                                <div class="row">
                                    <label class="timer-duration-label">Minutes</label>
                                    <input class="timer-inputs minutesInput" type="number" maxlength="2" min="0" value="<%- counterPrefs.minutes %>" onkeyup="if (/\D/g.test(this.value)) this.value = this.value.replace(/\D/g,'')"/>
                                </div>
                            </div>
                        </div>


                        <div class="row">
                            <label>Timer Type:</label>
                            <select class="timing_algo_selector">
                                <option value="all" <%= counterPrefs.timing_algo==="all" ? "selected" : "" %>>Same for All Visitors</option>
                                <option value="peruser" <%= counterPrefs.timing_algo==="peruser" ? "selected" : "" %>>Independent for Each Visitor</option>
                            </select>
                        </div>



                        <div class="row">
                            <label>When Countdown Ends:</label>
                            <select class="counter-finish-selector">

                                <option value="0" <%= counterPrefs.timer_end_action==="0" ? "selected" : "" %>>Do Nothing</option>
                                <option value="1" <%= counterPrefs.timer_end_action==="1" ? "selected" : "" %> >Hide Bar</option>
                            </select>
                        </div>

                    </div>

                    <div class="section-container section-wrapper message-wrapper right-align" style="padding-top:10px;">
                        <h6>Style</h6>
                        <div class="row">
                            <label>Timer Style:</label>

                            <select class="counter-style">
                                <option value="slot" <%= counterPrefs.timerFace==="slot" ? "selected" : "" %>>Basic</option>
                                <option value="slot-background" <%= counterPrefs.timerFace==="slot-background" ? "selected" : "" %>>Solid Background</option>
                                <option value="slot-bordered" <%= counterPrefs.timerFace==="slot-bordered" ? "selected" : "" %>>Bordered</option>
                                <option value="flip" <%= counterPrefs.timerFace==="flip" ? "selected" : "" %>>Flipper</option>
                                <option value="matrix-3x5" <%= counterPrefs.timerFace==="atrix-3x5" ? "selected" : "" %>>Matrix</option>
                            </select>
                        </div>


                        <div class="row">

                            <div class="row side-elements" style="display:;">
                                <label>Background Color:</label>
                                <input class="jscolor timerBgColor colorShapes" value="<%= counterPrefs.timerBgColor %>"/>
                            </div>

                            <div class="row side-elements" style="display:none;">
                                <label>Border Color:</label>
                                <input class="jscolor timerBorderColor colorShapes" value="<%= counterPrefs.timerBorderColor %>"/>
                            </div>


                            <div class="row side-elements">
                                <label>Number Color:</label>
                                <input class="jscolor timerTextColor colorShapes" value="<%= counterPrefs.timerTextColor %>"/>
                            </div>
                        </div>

                        <div class="row" style="margin-bottom:2em;">
                            <label>Label Position:</label>
                            <select class="layoutSelector">
                                <option value="group" <%= counterPrefs.layout==="group" ? "selected" : "" %>>Bottom</option>
                                <option value="inline" <%= counterPrefs.layout==="inline" ? "selected" : "" %>>Inline</option>
                                <option value="group label-hidden" <%= counterPrefs.layout==="group label-hidden" ? "selected" : "" %>>Hidden</option>
                            </select>
                        </div>

                        <div class="row side-elements">
                            <input class="customLabelCheck" type="checkbox" <%= counterPrefs.useCustomLabels===true ? "checked" : "" %> />
                            <label>Use Custom Labels</label>

                        </div>

                        <div class="row labelsRow" style="display:none;">


                            <div class="side-elements">
                                <div class="row">
                                    <label>Days:</label>
                                    <input class="timerLabelsInput daysLabelInput" type="text" value="<%= counterPrefs.daysLabel%>"/>
                                </div>

                                <div class="row">
                                    <label>Hours:</label>
                                    <input class="timerLabelsInput hoursLabelInput" type="text" value="<%= counterPrefs.hoursLabel%>"/>
                                </div>

                                <div class="row">
                                    <label>Minutes:</label>
                                    <input class="timerLabelsInput minutesLabelInput" type="text" value="<%= counterPrefs.minutesLabel%>"/>
                                </div>

                                <div class="row">
                                    <label>Seconds:</label>
                                    <input class="timerLabelsInput secondsLabelInput" type="text" value="<%= counterPrefs.secondsLabel%>"/>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="section-container container-edit message-element" data-state="open">

                <h4>Message Settings</h4>
                <p>Edit your message, font and icon</p>
                <div class="card">

                    <div class="section-container message-wrapper left-align" style="padding-top:10px;">
                        <h6>Announcement</h6>
                        <label>Message:</label>
                        <div class="row side-elements message-row">
                            <p class="barText" contenteditable="true" ><%- datacounter.message %></p>
                            <button class="bold-btn secondary" style='font-family:"Times New Roman", Times, serif; font-weight:bold;'>B</button>
                            <button class="italic-btn secondary" style='font-family:"Times New Roman", Times, serif; font-weight:bold; font-style:italic;'>I</button>
                            <!--<input type="text" value="Your Message Goes Here" class="barText"/>-->
                        </div>



                        <div class="row">
                            <label>Font Style:</label>
                            <div class="column twelve">
                                <input class="fonts" name="fonts" id="fonts" value="<%- datacounter.font %>"/>
                            </div>
                        </div>

                        <div class="row">
                            <label>Font Size:</label>
                            <select class="font-size" <%=  datacounter.fontSize %>>
                                <option value="12"  <%= datacounter.fontSize==="12" ? "selected" : "" %> >12</option>
                                <option value="13" <%= datacounter.fontSize==="13" ? "selected" : "" %> >13</option>
                                <option value="14"  <%= datacounter.fontSize==="14" ? "selected" : "" %> >14</option>
                                <option value="15"   <%= datacounter.fontSize==="15" ? "selected" : "" %>>15</option>
                                <option value="16"  <%= datacounter.fontSize==="16" ? "selected" : "" %>>16</option>
                                <option value="17" <%= datacounter.fontSize==="17" ? "selected" : "" %> >17</option>
                                <option value="18" <%= datacounter.fontSize==="18" ? "selected" : "" %> >18</option>
                                <option value="19"  <%= datacounter.fontSize==="19" ? "selected" : "" %> >19</option>
                                <option value="20" <%= datacounter.fontSize==="20" ? "selected" : "" %> >20</option>
                                <option value="21" <%= datacounter.fontSize==="21" ? "selected" : "" %>  >21</option>
                                <option value="22"  <%= datacounter.fontSize==="22" ? "selected" : "" %> >22</option>
                                <option value="23"  <%= datacounter.fontSize==="23" ? "selected" : "" %> >23</option>
                                <option value="24"  <%= datacounter.fontSize==="24" ? "selected" : "" %>  >24</option>
                                <option value="25" <%= datacounter.fontSize==="25" ? "selected" : "" %>  >25</option>
                                <option value="26"  <%= datacounter.fontSize==="26" ? "selected" : "" %> >26</option>
                                <option value="27" <%= datacounter.fontSize==="27" ? "selected" : "" %> >27</option>
                                <option value="28"  <%= datacounter.fontSize==="28" ? "selected" : "" %> >28</option>
                                <option value="29" <%= datacounter.fontSize==="29" ? "selected" : "" %> >29</option>
                                <option value="30"  <%= datacounter.fontSize==="30" ? "selected" : "" %> >30</option>
                            </select>
                        </div>
                        <div class="row side-elements">
                            <label >Text Color:</label>
                            <input class="jscolor textColor colorShapes" id="textColor" value="<%= datacounter.textColor %>"/>
                        </div>

                    </div>



                    <div class="section-container container-edit right-align" style="margin-top:13px;">
                        <h6>Call To Action</h6>
                        <p>Encourage visitors to take action</p>


                        <div class="section-wrapper">
                            <div class="row">
                                <label>Call To Action Type:</label>
                                <select class="call_to_action_selector">

                                    <option  class="cta_radio"  value="0" <%= datacounter.cta_type==="0" ? "selected" : "" %>/>Disabled</option>
                                    <option  class="cta_radio"  value="1" <%= datacounter.cta_type==="1" ? "selected" : "" %> />Make entire bar clickable</option>
                                    <option  class="cta_radio"  value="3" <%= datacounter.cta_type==="2" ? "selected" : "" %> />Add a simple link</option>
                                </select>
                            </div>
                        </div>

                        <div class="section-wrapper clickable_bar_prefs" style="display:none;">

                            <div class="row">
                                <label>Click Target URL:</label>
                                <input type="text" class="barTarget" value="" placeholder="http://myawesomeshop.com" />
                            </div>
                            <div class="row">
                                <div class="row">
                                    <label>Link Behaviour:</label>
                                    <select class="linkType">
                                        <option value="same" <%= datacounter.linkType==="same" ? "selected" : "" %>>Open link in the same window</option>
                                        <option value="new" <%= datacounter.linkType==="new" ? "selected" : "" %> >Open link in a new window</option>

                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="section-wrapper button_prefs" style="display:none;">

                            <div class="row">
                                <label>Button Text:</label>
                                <input type="text" class="btnText" value="<%= datacounter.btnText %>" maxlength="16"/>

                            </div>
                            <div class="row">
                                <label>Button Style:</label>
                                <select class="button_style" >
                                    <option value="solid" <%= datacounter.btn_style==="solid" ? "selected" : "" %> >Square Solid</option>
                                    <option value="hollow" <%= datacounter.btn_style==="hollow" ? "selected" : "" %>   >Square Hollow</option>
                                    <option value="rounded-solid-btn" <%= datacounter.btn_style==="rounded-solid-btn" ? "selected" : "" %>    >Rounded Solid</option>
                                    <option value="rounded-hollow-btn" <%= datacounter.btn_style==="rounded-hollow-btn" ? "selected" : "" %>   >Rounded Hollow</option>
                                </select>
                            </div>
                            <div class="row">
                                <label>Button Target URL:</label>
                                <input type="text" class="btnTarget" value="<%= datacounter.btnTarget %>" placeholder="http://myawesomeshop.com"/>
                            </div>
                            <div class="row">
                                <div class="row">
                                    <label>Link Behaviour:</label>
                                    <select class="linkType"  >
                                        <option value="same"  <%= datacounter.linkType==="same" ? "selected" : "" %>>Open link in the same window</option>
                                        <option value="new"   <%= datacounter.linkType==="new" ? "selected" : "" %> >Open link in a new window</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row side-elements">

                                <label>Button Color:</label>
                                <input class="jscolor btnColor colorShapes" value="<%= datacounter.btnColor%>"/>


                                <label style="margin-left:3em">Button Text Color:</label>
                                <input class="jscolor btnTextColor colorShapes" value="<%= datacounter.btnTextColor%>"/>

                            </div>
                        </div>

                        <div class="section-wrapper slink_prefs" style="display:none;">

                            <div class="row">
                                <label>Link Text:</label>
                                <input type="text" class="slinkText" value="<%= datacounter.btnText %>" maxlength="16"/>

                            </div>
                            <div class="row">
                                <label>Link Target URL:</label>
                                <input type="text" class="slinkTarget" value="<%= datacounter.btnTarget %>" placeholder="http://myawesomeshop.com"/>
                            </div>
                            <div class="row">
                                <label>Link Behaviour:</label>
                                <select class="linkType" >
                                    <option value="same" <%= datacounter.linkType==="same" ? "selected" : "" %>  >Open link in the same window</option>
                                    <option value="new"  <%= datacounter.linkType==="new" ? "selected" : "" %> >Open link in a new window</option>
                                </select>
                            </div>
                            <div class="row side-elements">

                                <label>Link Text Color:</label>
                                <input class="jscolor slinkTextColor colorShapes" value="<%= datacounter.btnTextColor %>"/>

                            </div>
                        </div>

                        <div class="section-wrapper coupon_prefs" style="display:none;">

                            <div class="row">
                                <label>Coupon Text:</label>
                                <input type="text" class="couponText" value="<%= datacounter.btnText%>" maxlength="16"/>

                            </div>

                            <div class="row">
                                <label>Coupon Style:</label>
                                <select class="coupon_style">
                                    <option value="square-dashed"  <%= datacounter.btn_style==="square-dashed" ? "selected" : "" %> >Square Dashed</option>
                                    <option value="square-solid"  <%= datacounter.btn_style==="square-solid" ? "selected" : "" %> >Square Solid</option>
                                    <option value="rounded-dashed" <%= datacounter.btn_style==="rounded-dashed" ? "selected" : "" %> >Rounded Dashed</option>
                                    <option value="rounded-solid"   <%= datacounter.btn_style==="rounded-solid" ? "selected" : "" %> >Rounded Solid</option>
                                </select>

                            </div>

                            <div class="row side-elements">

                                <label>Border Color:</label>
                                <input class="jscolor couponColor colorShapes" value="<%= datacounter.btnColor%>"/>


                                <label style="margin-left:3em">Text Color:</label>
                                <input class="jscolor couponTextColor colorShapes" value="<%= datacounter.btnTextColor%>"/>

                            </div>
                        </div>


                    </div>


                    <div class="section-container left-align" style="clear:left; padding-top:15px;">
                        <h6>ICON</h6>
                        <p>Add an icon next to your message</p>
                        <div class="row">
                            <label style="display:none;"><input id="hasIcon" class="hasIcon" type="checkbox" checked/>
                                Show Icon</label>
                        </div>

                        <div class="row side-elements">
                            <label>Icon Style:</label>
                            <i class="icon-preview-holder <%= datacounter.icon %>"></i>
                            <i class="icon-close-circle remove-icon" style="display:none;"></i>
                            <a class="icon-selector" >Choose icon</a>

                            <!-- <i class="icon-edit icon-selector"></i> -->

                            <input class="icon-placeholder icon" name="icon" type="hidden" value="<%= datacounter.icon %>" />

                        </div>

                        <div class="row side-elements">
                            <label>Icon Color:</label>
                            <input class="jscolor iconColor colorShapes" value="<%= datacounter.iconColor %>"/>

                        </div>
                    </div>

                </div>
            </div>


            <div class="section-container container-edit" >
                <h4>Basic Settings</h4>
                <p>Your bar's basic settings</p>
                <div class="grid">

                    <div class="card">
                        <div class="row">
                            <label>Name:</label>
                            <input type="text" value="<%= datacounter.name %>" class="barName"/>

                        </div>
                        <div class="section-wrapper">
                            <h6>BACKGROUND</h6>
                            <div class="row side-elements">
                                <label>Background Color:</label>
                                <input class="jscolor bgColor colorShapes" value="<%= datacounter.bgColor %>"/>
                            </div>

                            <div class="row">
                                <div class="slidecontainer">
                                    <label class="opacity-label">Opacity: <script>document.write(Math.floor('1'*100) + '%')</script></label>
                                    <input type="range" min="0.1" max="1" value="<%= datacounter.opacity %>" step="0.05" class="slider opacity">
                                </div>
                            </div>

                            <label>Background Image:<a class="clearBgImage" >Clear</a></label>
                            <br />
                            <div class="row side-elements">
                                <span id="nav-left-counter"></span>
                                <div class="slider-parent">
                                    <div id="slider-wrapper-counter">
 <div class="slide-card" data-name="1.png" style="background:url('images/templates/1.png');"></div>
                                   <div class="slide-card" data-name="2.png" style="background:url('images/templates/2.png');"></div>
                                   <div class="slide-card" data-name="3.png" style="background:url('images/templates/3.png');"></div>
                                 <div class="slide-card" data-name="4.png" style="background:url('images/templates/4.png');"></div>
                                  <div class="slide-card" data-name="5.png" style="background:url('images/templates/5.png');"></div>
                                  <div class="slide-card" data-name="6.png" style="background:url('images/templates/6.png');"></div>
                                  <div class="slide-card" data-name="7.png" style="background:url('images/templates/7.png');"></div>
                                   <div class="slide-card" data-name="8.png" style="background:url('images/templates/8.png');"></div>
                                <div class="slide-card" data-name="9.png" style="background:url('images/templates/9.png');"></div>
                                  <div class="slide-card" data-name="10.png" style="background:url('images/templates/10.png');"></div>
                                <div class="slide-card" data-name="11.png" style="background:url('images/templates/11.png');"></div>
                                   <div class="slide-card" data-name="12.png" style="background:url('images/templates/12.png');"></div>
                            <div class="slide-card" data-name="13.png" style="background:url('images/templates/13.png');"></div>
                                 <div class="slide-card" data-name="14.png" style="background:url('images/templates/14.png');"></div>
                                 <div class="slide-card" data-name="15.png" style="background:url('images/templates/15.png');"></div>
                                <div class="slide-card" data-name="16.png" style="background:url('images/templates/16.png');"></div>
                             <div class="slide-card" data-name="17.png" style="background:url('images/templates/17.png');"></div>
                           <div class="slide-card" data-name="18.png" style="background:url('images/templates/18.png');"></div>
                                   <div class="slide-card" data-name="19.png" style="background:url('images/templates/19.png');"></div>
                                    <div class="slide-card" data-name="20.png" style="background:url('images/templates/20.png');"></div>
                                   <div class="slide-card" data-name="21.png" style="background:url('images/templates/21.png');"></div>
                                 <div class="slide-card" data-name="22.png" style="background:url('images/templates/22.png');"></div>
                             <div class="slide-card" data-name="23.png" style="background:url('images/templates/23.png');"></div>
                             <div class="slide-card" data-name="24.png" style="background:url('images/templates/24.png');"></div>
                             <div class="slide-card" data-name="25.png" style="background:url('images/templates/25.png');"></div>
                                <div class="slide-card" data-name="26.png" style="background:url('images/templates/26.png');"></div>
                               <div class="slide-card" data-name="27.png" style="background:url('images/templates/27.png');"></div>
                              <div class="slide-card" data-name="28.png" style="background:url('images/templates/28.png');"></div>
                                  <div class="slide-card" data-name="29.png" style="background:url('images/templates/29.png');"></div>
                                  <div class="slide-card" data-name="30.png" style="background:url('images/templates/30.png');"></div>
                            <div class="slide-card" data-name="31.png" style="background:url('images/templates/31.png');"></div>
                               <div class="slide-card" data-name="32.png" style="background:url('images/templates/32.png');"></div>
                            <div class="slide-card" data-name="33.png" style="background:url('images/templates/33.png');"></div>
                                  <div class="slide-card" data-name="34.png" style="background:url('images/templates/34.png');"></div>
                                <div class="slide-card" data-name="35.png" style="background:url('images/templates/35.png');"></div>
                                <div class="slide-card" data-name="36.png" style="background:url('images/templates/36.png');"></div>
                              <div class="slide-card" data-name="37.png" style="background:url('images/templates/37.png');"></div>
                                <div class="slide-card" data-name="38.png" style="background:url('images/templates/38.png');"></div>
                               <div class="slide-card" data-name="39.png" style="background:url('images/templates/39.png');"></div>
                                 <div class="slide-card" data-name="40.png" style="background:url('images/templates/40.png');"></div>
                                  <div class="slide-card" data-name="41.png" style="background:url('images/templates/41.png');"></div>
                                 <div class="slide-card" data-name="42.png" style="background:url('images/templates/42.png');"></div>
                <div class="slide-card" data-name="43.png" style="background:url('images/templates/43.png');"></div>
                                <div class="slide-card" data-name="44.png" style="background:url('images/templates/44.png');"></div>
                           <div class="slide-card" data-name="45.png" style="background:url('images/templates/45.png');"></div>
             <div class="slide-card" data-name="46.png" style="background:url('images/templates/46.png');"></div>
                                    </div>
                                </div>
                                <span id="nav-right-counter"></span>
                            </div>
                            <div class="row upload-zone" style="display: none">



                            <input type="file" title="Click to add Files" class="file-input">
                                <input type="hidden" class="img" value="https://assets.apphero.co/images/templates/1.png" />
                                <img src="https://assets.apphero.co/images/loading.gif" width="24" hight="24" class="loading" style="display:none;" />


                                <p class="upload-error"></p>
                                <p>(JPG, PNG or GIF, max size:100kb)</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="section-wrapper">
                            <h6>POSITION</h6>
                            <div class="row">
                                <label>Bar Position:</label>
                                <select id="posSelector" class="posSelector">
                                    <option value="top" <%= datacounter.position==="top" ? "selected" : "" %>  >Top</option>
                                    <option value="bottom" <%= datacounter.position==="bottom" ? "selected" : "" %> >Bottom</option>
                                    <option value="custom" <%= datacounter.position==="custom" ? "selected" : "" %> >Bottom</option>
                                </select>

                            </div>

                            <div class="code-row row" style="display:none;">
                                Copy the tag below and paste it into your theme where you'd like the bar to appear:
                                <a target="_blank" href="https://help.apphero.co/article/31-how-to-insert-the-bar-in-a-custom-location">Learn more</a>
                                <br/><br />
                                <div class="row side-elements markdown">
                                    <div id="markdown-body" class="markdown-body">
                                        &lt;div class='aph_bar_wrapper'&gt;&lt;/div&gt;
                                    </div>
                                    <div class="tooltip">
                                        <button onclick="copyText()" onmouseout="outFunc()">
                                            <span class="tooltiptext" id="myTooltip">Copy</span>
                                            Copy
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <label>
                                    <input type="checkbox" class="posOnTop" <%= datacounter.posOnTop==="true" ? "checked" : "" %> />
                                    Bar moves with scroll
                                </label>
                            </div>

                        </div>
                        <div class="section-wrapper">
                            <h6>EXTRA FUNCTIONS</h6>
                            <div class="row">
                                <label>
                                    <input class="user_closable" type="checkbox" <%= datacounter.user_closable==="true" ? "checked" : "" %>/>
                                    Bar can be hidden</label>
                            </div>
                            <div class="row">
                                <label>Hide Button Style:</label>
                                <select class="bar_dismiss_style"  disabled="true">
                                    <option value="Light"  <%= datacounter.bar_dismiss_style==="Light" ? "selected" : "" %> >Light</option>
                                    <option  value="Dark"  <%= datacounter.bar_dismiss_style==="Dark" ? "selected" : "" %>  >Dark</option>
                                </select>
                            </div>
                        </div>
                    </div>




                </div>
            </div>


            <div class="section-container container-edit">

                <h4 class="locked-heading">Targeting
                </h4>

                <p class="locked-subheading">Show the bar to specific users</p>
                <div class="grid targeting-grid" style="opacity:1;" data-plan="PRO" >
                    <div class="card">
                        <div class="section-wrapper">
                            <h6>Page Targeting</h6>
                            <p>Choose which pages to have the bar</p>
                            <div class="row">
                                <select class="page-target" >
                                    <option value="all" <%= datacounter.pageTarget==="all" ? "selected" : "" %>  >Show on every page</option>

                                    <option value="home" <%= datacounter.pageTarget==="home" ? "selected" : "" %>  >Show on home page only</option>

                                    <option value="collection"  <%= datacounter.pageTarget==="collection" ? "selected" : "" %> >Show on collections only</option>

                                    <option value="product"  <%= datacounter.pageTarget==="product" ? "selected" : "" %> >Show on products only</option>

                                    <<option value="custom"  <%= datacounter.pageTarget==="custom" ? "selected" : "" %>    >Custom page</option>

                                </select>
                            </div>
                            <div id="customPageRow<%= counterdata[i].bar_id %>" class="row customPageRow" style="  <%=  datacounter.pageTarget==="custom"? 'display:block;':'display:none;' %>" >
                                <label>Page URL:</label>
                                <input id="customPageURL<%= counterdata[i].bar_id %>" class="customPageURL" name="customPageURL" type="text" />
                                <input type="hidden" id="pageTarget<%= counterdata[i].bar_id %>" />
                                <script>
                              '<%= counterdata[i].bar_id %>'
                                    var options = {};
                                    var selected = [];
                                    options['<%= counterdata[i].bar_id %>'] = [];
                                    selected['<%= counterdata[i].bar_id %>'] = [];
                                    masterPages['<%= counterdata[i].bar_id %>'] = [];
                                    masterGeo['<%= counterdata[i].bar_id %>'] = [];
                                    masterDomains['<%= counterdata[i].bar_id %>'] = [];
                                    /*  */




                                    $(function(){
                                        var $select = $('#customPageURL'+'<%= counterdata[i].bar_id %>').selectize({
                                            plugins: ['remove_button'],
                                            create:true,


                                            onInitialize:function() {

                                                let arroptions = <%- datacounter.pageTargetOptions %>
                                                if(arroptions.length>0)
                                                {
                                                    console.log(arroptions)
                                                    for (var i = 0;
                                                         i < arroptions.length; i++) {
                                                        this.addOption({'value':arroptions[i]});
                                                        selected.push(arroptions[i]);
                                                    }

                                                }
                                                this.setValue(selected);
                                            },

                                            onItemAdd:function(value,$item) {
                                                masterPages[ '<%= counterdata[i].bar_id %>'].push(value);
                                            },
                                            onItemRemove:function(value){
                                                var index = masterPages[ '<%= counterdata[i].bar_id %>'].indexOf(value);
                                                if (index !== -1 ) { masterPages[ '<%= counterdata[i].bar_id %>'].splice(index,1); }
                                            },
                                            valueField: 'value',
                                            labelField: 'value',
                                            searchField: 'value',


                                        });

                                        var selectedDomain = [];
                                        var $selectDomain = $('#domain'+ '<%= counterdata[i].bar_id %>').selectize({
                                            plugins: ['remove_button'],
                                            create:true,


                                            onInitialize:function() {
                                                this.setValue(selectedDomain);

                                            },

                                            onItemAdd:function(value,$item) {
                                                masterDomains[ '<%= counterdata[i].bar_id %>'].push(value);
                                            },
                                            onItemRemove:function(value){
                                                var index = masterDomains[ '<%= counterdata[i].bar_id %>'].indexOf(value);
                                                if (index !== -1 ) { masterDomains[ '<%= counterdata[i].bar_id %>'].splice(index,1); }
                                            },
                                            valueField: 'value',
                                            labelField: 'value',
                                            searchField: 'value',


                                        });

                                        //var selectizes = $select[0].selectize;

                                        //selectizes.setValue(selected);



                                        var somedata;
                                        var selectedGeo = [];
                                        var $selectGeo = $('#geo'+'<%= counterdata[i].bar_id %>').selectize({
                                            plugins: ['remove_button'],
                                            valueField:'alpha-2',
                                            labelField:'name',
                                            searchField:'name',
                                            onFocus:function() {
                                            },
                                            onInitialize:function() {
                                                somedata= <%- JSON.stringify(datacounter.countryOptions)%>
                                                    console.log(somedata)
                                                somedata = JSON.parse(somedata)
                                                console.log(somedata.length)
                                                if (somedata.length>0) {
                                                    for (let j = 0; j < somedata.length; j++) {
                                                        this.addOption(somedata[j]);
                                                        selectedGeo.push(somedata[j]['alpha-2']);

                                                    }

                                                }
                                                this.setValue(selectedGeo);


                                            },
                                            onChange:function(value,label) {

                                                if (value != "") {
                                                    var arr = value.split(',');
                                                    for (var i=0; i < arr.length;i++) {
                                                        var name = $('[data-value="' + arr[i] + '"]').text();
                                                        name = name.substr(0,name.length-1);
                                                        arr[i] = {'alpha-2':arr[i], 'name':name};

                                                    }
                                                    masterGeo['<%= counterdata[i].bar_id %>'] = arr;
                                                }
                                                else {
                                                    masterGeo['<%= counterdata[i].bar_id %>'] = [];
                                                }


                                            },
                                            load:function(query, callback) {
                                                if (!query.length) return callback();
                                                $.ajax({
                                                    url: 'https://apphero.co/templates/countries.json',
                                                    type: 'GET',
                                                    dataType: 'json',
                                                    data: {
                                                        name: query,
                                                    },
                                                    error: function() {
                                                        callback();
                                                    },
                                                    success: function(res) {
                                                        callback(res);
                                                    }
                                                });
                                            }
                                        });


                                    });
                                </script>
                            </div>
                        </div>
                        <br/>
                        <div class="section-wrapper">
                            <h6>Subdomain Targeting</h6>
                            <p>Show your bar on specific subdomains</p>
                            <div class="row">
                                <select class="domain-target">
                                    <option value="all" selected>Display on all subdomains</option>
                                    <option value="specific">Display on specific subdomains</option>
                                    <option value="main">Display on main domain only</option>
                                </select>
                                <div id="subDomainRow" class="row" style="display:none;">
                                    <label>Subdomains: <a href='https://help.apphero.co/article/19-how-do-i-enter-my-subdomain-for-subdomain-targeting' target='_blank'>Learn More</a></label>
                                    <input id="domain246365_182969" value="<%= counterdata.domainTarget %>" class="domainTarget" name="domainTarget" type="text" />
                                </div>
                            </div>
                        </div>
                        <br/>
                        <div class="section-wrapper">
                            <h6>DEVICE TARGETING</h6>
                            <p>Show the bar on certain device types</p>
                            <div class="row">

                                <input class="cta_radio device_radio" name="device_target-<%= counterdata[i].bar_id %>" type="radio" value="0"  <%= datacounter.device_target === 0 ? "checked" : "" %>   />Show on all devices<br/>
                                <input class="cta_radio device_radio" name="device_target-<%= counterdata[i].bar_id %>" type="radio" value="1"   <%= datacounter.device_target === 1 ? "checked" : "" %> />Show on desktop only<br/>
                                <input class="cta_radio device_radio" name="device_target-<%= counterdata[i].bar_id %>" type="radio" value="2"  <%= datacounter.device_target === 2 ?  "checked" : "" %> />Show on mobile only<br/>

                            </div>
                        </div>

                    </div>

                    <div class="card">
                        <div class="section-wrapper">
                            <h6>Geotargeting</h6>
                            <p>Show the bar to people living in certain countries</p>
                            <label>Countries:</label>
                            <input id="geo<%= counterdata[i].bar_id %>" class="geoTarget" name="geoTarget" type="text" />
                        </div>
                        <br />
                        <div class="section-wrapper">
                            <h6>User Source Targeting</h6>
                            <p>Show the bar to visitors coming from a specific website</p>
                            <div class="row">
                                <label>Source:</label>
                                <select class="user_source">
                                    <option value="disabled" <%= datacounter.source_mode==="disabled" ? "selected" : "" %>  >All Sources</option>
                                    <option value="facebook.com" <%= datacounter.source_mode==="facebook.com" ? "selected" : "" %>  >Facebook</option>
                                    <option value="instagram.com" <%= datacounter.source_mode==="instagram.com" ? "selected" : "" %>  >Instagram</option>
                                    <option value="t.co" <%= datacounter.source_mode==="t.co" ? "selected" : "" %>  >Twitter</option>
                                    <option value="google.com" <%= datacounter.source_mode==="google.com" ? "selected" : "" %>  >Google</option>
                                    <option value="pinterest.com" <%= datacounter.source_mode==="pinterest.com" ? "selected" : "" %>  >Pinterest</option>
                                    <option value="custom" <%= datacounter.source_mode==="custom" ? "selected" : "" %>>Custom URL</option>
                                    <option value="utm" <%= datacounter.source_mode==="utm" ? "selected" : "" %>>UTM Code</option>
                                </select>
                            </div>
                            <div class="row utm_row">
                                <label>UTM Code</label>
                                <input class="utm_val" name="utm_val" type="text" placeholder="ex:utm_source=email"/>
                            </div>
                            <div class="row source_url_row">
                                <label>UTM Code</label>
                                <input class="source_url" name="source_url" type="text" placeholder="domain.com"/>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="btns-container">
                <!--<button class="button btn-save" >Update</button>-->
                <button type="button" class="btn-save Polaris-Button Polaris-Button--primary"><span class="Polaris-Button__Content">
  <span>Save</span></span></button>
                <button class="secondary btn-cancel">Cancel</button>

            </div>

        </div>


        <input type="hidden" class="" value="14263" />
    </section>
<% } %>



    <script>
        let multidata = <%- JSON.stringify(multidata) %>
            console.log(multidata);
    </script>
    <% for(var i=0; i<multidata.length; i++) { %>
        <% datamulti = JSON.parse(multidata[i].data) %>
    <section class="bar-settings" id=<%=multidata[i].bar_id%> data-type=multi>
        <div class="card main-card">

            <span class="tag <%= multidata[i].bar_statu==="activate" ? " green" : "grey" %>"><%= multidata[i].bar_statu==="activate" ? "active" : "Paused" %></span>
            <span class="tag blue">Multi-Message</span>

            <div class="preview">
                <div class="title-prev">
                    <h5><%- datamulti.name%></h5>
                </div>
                <div class="control-btns">
                    <button class='secondary toggle <%= multidata[i].bar_statu==="activate" ? " pause-btn fa fa-pause" : " play-btn fa fa-play" %>' data-hover='<%= multidata[i].bar_statu==="desactivate" ? "Deactivate" : "Activate" %>'></button>

                    <button class="secondary icon-edit edit-btn"></button>
                    <button class="secondary icon-trash btn-del"></button>

                </div>
            </div>
        </div>


        <div class="edit-multi">


            <% for(var j=0; j<datamulti.message.length; j++) { %>
            <div class="section-container container-edit message-element"  data-state="closed">

                <h4>Message <%- j+1 %></h4>
                <div class="card">

                    <div class="message-highlight">
                        <div class="text-highlight">
                            <%- datamulti.message[j].text %>
                        </div>


                        <div class="highlight-controls">
                            <span class="highlight-control-element highlight-edit"><i style="vertical-align:bottom; color:#777;" class="fas fa-chevron-down"></i></span>
                            <span class="highlight-control-element remove-message-element"><i style="color:#777;" class="fas fa-trash"></i></span>
                        </div>
                    </div>

                    <div class="section-container message-wrapper left-align" style="display:none; padding-top:10px;">
                        <h6>Announcement</h6>
                        <label>Message:</label>
                        <div class="row side-elements message-row">
                            <p class="barText" contenteditable="true" ><%- datamulti.message[j].text %></p>
                            <button class="bold-btn secondary" style='font-family:"Times New Roman", Times, serif; font-weight:bold;'>B</button>
                            <button class="italic-btn secondary" style='font-family:"Times New Roman", Times, serif; font-weight:bold; font-style:italic;'>I</button>
                            <!--<input type="text" value="Array" class="barText"/>-->
                        </div>



                        <div class="row">
                            <label>Font Style:</label>
                            <div class="column twelve">
                                <input class="fonts" name="fonts" id="fonts" value="<%- datamulti.message[j].font %>"/>
                            </div>
                        </div>

                        <div class="row">
                            <label>Font Size:</label>
                            <select class="font-size" <%=  datamulti.message[j].fontSize %>>
                                <option value="12"  <%= datamulti.message[j].fontSize==="12" ? "selected" : "" %> >12</option>
                                <option value="13" <%= datamulti.message[j].fontSize==="13" ? "selected" : "" %> >13</option>
                                <option value="14"  <%= datamulti.message[j].fontSize==="14" ? "selected" : "" %> >14</option>
                                <option value="15"   <%= datamulti.message[j].fontSize==="15" ? "selected" : "" %>>15</option>
                                <option value="16"  <%= datamulti.message[j].fontSize==="16" ? "selected" : "" %>>16</option>
                                <option value="17" <%= datamulti.message[j].fontSize==="17" ? "selected" : "" %> >17</option>
                                <option value="18" <%= datamulti.message[j].fontSize==="18" ? "selected" : "" %> >18</option>
                                <option value="19"  <%= datamulti.message[j].fontSize==="19" ? "selected" : "" %> >19</option>
                                <option value="20" <%= datamulti.message[j].fontSize==="20" ? "selected" : "" %> >20</option>
                                <option value="21" <%= datamulti.message[j].fontSize==="21" ? "selected" : "" %>  >21</option>
                                <option value="22"  <%= datamulti.message[j].fontSize==="22" ? "selected" : "" %> >22</option>
                                <option value="23"  <%= datamulti.message[j].fontSize==="23" ? "selected" : "" %> >23</option>
                                <option value="24"  <%= datamulti.message[j].fontSize==="24" ? "selected" : "" %>  >24</option>
                                <option value="25" <%= datamulti.message[j].fontSize==="25" ? "selected" : "" %>  >25</option>
                                <option value="26"  <%= datamulti.message[j].fontSize==="26" ? "selected" : "" %> >26</option>
                                <option value="27" <%= datamulti.message[j].fontSize==="27" ? "selected" : "" %> >27</option>
                                <option value="28"  <%= datamulti.message[j].fontSize==="28" ? "selected" : "" %> >28</option>
                                <option value="29" <%= datamulti.message[j].fontSize==="29" ? "selected" : "" %> >29</option>
                                <option value="30"  <%= datamulti.message[j].fontSize==="30" ? "selected" : "" %> >30</option>
                            </select>
                        </div>
                        <div class="row side-elements">
                            <label >Text Color:</label>
                            <input class="jscolor textColor colorShapes" id="textColor" value="<%- datamulti.message[j].textColor %>"/>
                        </div>

                    </div>



                    <div class="section-container container-edit right-align" style="display:none; padding-top:13px;">
                        <h6>Call To Action</h6>
                        <p>Encourage visitors to take action</p>


                        <div class="section-wrapper">
                            <div class="row">
                                <label>Call To Action Type:</label>
                                <select class="call_to_action_selector">

                                    <option  class="cta_radio"  value="0" <%= datamulti.message[j].cta_type===0 ? "selected" : "" %>  />Disabled</option>
                                    <option  class="cta_radio"  value="1" <%= datamulti.message[j].cta_type===1 ? "selected" : "" %> />Make entire bar clickable</option>
                                    <option  class="cta_radio"  value="2" <%= datamulti.message[j].cta_type===2 ? "selected" : "" %> />Add button on the bar</option>
                                    <option  class="cta_radio"  value="3" <%= datamulti.message[j].cta_type===3 ? "selected" : "" %> />Add a simple link</option>
                                    <option  class="cta_radio"  value="4" <%= datamulti.message[j].cta_type===4 ? "selected" : "" %> />Add coupon placement</option>
                                </select>
                            </div>
                        </div>

                        <div class="section-wrapper clickable_bar_prefs" style="display:none;">

                            <div class="row">
                                <label>Click Target URL:</label>
                                <input type="text" class="barTarget" value="<%= datamulti.message[j].btnTarget%>" placeholder="http://myawesomeshop.com" />
                            </div>
                            <div class="row">
                                <div class="row">
                                    <label>Link Behaviour:</label>
                                    <select class="linkType">
                                        <option value="same" <%= datamulti.message[j].linkType==="same" ? "selected" : "" %>>Open link in the same window</option>
                                        <option value="new" <%= datamulti.message[j].linkType==="new" ? "selected" : "" %>>Open link in a new window</option>

                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="section-wrapper button_prefs" style="display:block;">

                            <div class="row">
                                <label>Button Text:</label>
                                <input type="text" class="btnText" value="<%=datamulti.message[j].btnText %>" maxlength="16"/>

                            </div>
                            <div class="row">
                                <label>Button Style:</label>
                                <select class="button_style">
                                    <option value="solid" <%= datamulti.message[j].btn_style==="solid" ? "selected" : "" %>>Square Solid</option>
                                    <option value="hollow" <%= datamulti.message[j].btn_style==="hollow" ? "selected" : "" %>>Square Hollow</option>
                                    <option value="rounded-solid-btn" <%= datamulti.message[j].btn_style==="rounded-solid-btn" ? "selected" : "" %>>Rounded Solid</option>
                                    <option value="rounded-hollow-btn" <%= datamulti.message[j].btn_style==="rounded-hollow-btn\"" ? "selected" : "" %>>Rounded Hollow</option>
                                </select>
                            </div>
                            <div class="row">
                                <label>Button Target URL:</label>
                                <input type="text" class="btnTarget" value="<%= datamulti.message[j].btnTarget %>" placeholder="http://myawesomeshop.com"/>
                            </div>
                            <div class="row">
                                <div class="row">
                                    <label>Link Behaviour:</label>
                                    <select class="linkType">
                                        <option value="new" <%= datamulti.message[j].linkType==="new" ? "selected" : "" %>>Open link in a new window</option>
                                        <option value="same" <%= datamulti.message[j].linkType==="same" ? "selected" : "" %>>Open link in the same window</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row side-elements">

                                <label>Button Color:</label>
                                <input class="jscolor btnColor colorShapes" value="<%= datamulti.message[j].btnColor%>"/>


                                <label style="margin-left:3em">Button Text Color:</label>
                                <input class="jscolor btnTextColor colorShapes" value="<%= datamulti.message[j].btnTextColor%>"/>

                            </div>
                        </div>

                        <div class="section-wrapper slink_prefs" style="display:none;">

                            <div class="row">
                                <label>Link Text:</label>
                                <input type="text" class="slinkText" value="<%= datamulti.message[j].btnText %>" maxlength="16"/>

                            </div>
                            <div class="row">
                                <label>Link Target URL:</label>
                                <input type="text" class="slinkTarget" value="<%= datamulti.message[j].btnTarget %>" placeholder="http://myawesomeshop.com"/>
                            </div>
                            <div class="row">
                                <label>Link Behaviour:</label>
                                <select class="linkType">
                                    <option value="same" <%= datamulti.message[j].linkType==="same" ? "selected" : "" %>>Open link in the same window</option>
                                    <option value="new" <%= datamulti.message[j].linkType==="new" ? "selected" : "" %>>Open link in a new window</option>

                                </select>
                            </div>
                            <div class="row side-elements">

                                <label>Link Text Color:</label>
                                <input class="jscolor slinkTextColor colorShapes" value="<%= datamulti.message[j].btnTextColor%>"/>

                            </div>
                        </div>

                        <div class="section-wrapper coupon_prefs" style="display:none;">

                            <div class="row">
                                <label>Coupon Text:</label>
                                <input type="text" class="couponText" value="<%= datamulti.message[j].btnText%>" maxlength="16"/>

                            </div>

                            <div class="row">
                                <label>Coupon Style:</label>
                                <select class="coupon_style">
                                    <option value="square-dashed" <%= datamulti.message[j].btn_style==="square-dashed" ? "selected" : "" %>>Square Dashed</option>
                                    <option value="square-solid" <%= datamulti.message[j].btn_style==="square-solid" ? "selected" : "" %>>Square Solid</option>
                                    <option value="rounded-dashed" <%= datamulti.message[j].btn_style==="rounded-dashed" ? "selected" : "" %>>Rounded Dashed</option>
                                    <option value="rounded-solid" <%= datamulti.message[j].btn_style==="rounded-solid" ? "selected" : "" %>>Rounded Solid</option>
                                </select>
                            </div>

                            <div class="row side-elements">

                                <label>Border Color:</label>
                                <input class="jscolor couponColor colorShapes" value="<%= datamulti.message[j].btnColor%>"/>


                                <label style="margin-left:3em">Text Color:</label>
                                <input class="jscolor couponTextColor colorShapes" value="<%= datamulti.message[j].btnTextColor%>"/>

                            </div>
                        </div>


                    </div>


                    <div class="section-container left-align" style="display:none; clear:left; padding-top:15px;">
                        <h6>ICON</h6>
                        <p>Add an icon next to your message</p>
                        <div class="row">
                            <label style="display:none;"><input id="hasIcon" class="hasIcon" type="checkbox" checked/>
                                Show Icon</label>
                        </div>

                        <div class="row side-elements">
                            <label>Icon Style:</label>
                            <i class="icon-preview-holder <%= datamulti.message[j].icon %>"></i>
                            <i class="icon-close-circle remove-icon" style="display:none;"></i>
                            <a class="icon-selector" >Choose icon</a>

                            <!-- <i class="icon-edit icon-selector"></i> -->

                            <input class="icon-placeholder icon" name="icon" type="hidden" value="<%= datamulti.message[j].icon %>" />

                        </div>

                        <div class="row side-elements">
                            <label>Icon Color:</label>
                            <input class="jscolor iconColor colorShapes" value="<%= datamulti.message[j].iconColor %>"/>

                        </div>
                    </div>

                </div>
            </div>
            <% } %>

            <div class="new_messsage">
                <span class="new-message-button">+ Add New Message</span>
            </div>

            <div class="section-container container-edit">
                <h4>Basic Settings</h4>
                <p>Your bar's basic settings</p>
                <div class="grid">

                    <div class="card">
                        <div class="row">
                            <label>Name:</label>
                            <input type="text" value="<%- datamulti.name%>" class="barName"/>

                        </div>
                        <div class="section-wrapper">
                            <h6>BACKGROUND</h6>
                            <div class="row side-elements">
                                <label>Background Color:</label>
                                <input class="jscolor bgColor colorShapes" value="<%- datamulti.bgColor %>"/>
                            </div>

                            <div class="row">
                                <div class="slidecontainer">
                                    <label class="opacity-label">Opacity: <script>document.write(Math.floor('1'*100) + '%')</script></label>
                                    <input type="range" min="0.1" max="1" value="<%= datamulti.opacity %>" step="0.05" class="slider opacity">
                                </div>
                            </div>

                            <label>Background Image:<a class="clearBgImage" >Clear</a></label>
                            <br />
                            <div class="row side-elements">
                                <span id="nav-left-multi"></span>
                                <div class="slider-parent">
                                    <div id="slider-wrapper-multi">
 <div class="slide-card" data-name="1.png" style="background:url('images/templates/1.png');"></div>
                                   <div class="slide-card" data-name="2.png" style="background:url('images/templates/2.png');"></div>
                                   <div class="slide-card" data-name="3.png" style="background:url('images/templates/3.png');"></div>
                                 <div class="slide-card" data-name="4.png" style="background:url('images/templates/4.png');"></div>
                                  <div class="slide-card" data-name="5.png" style="background:url('images/templates/5.png');"></div>
                                  <div class="slide-card" data-name="6.png" style="background:url('images/templates/6.png');"></div>
                                  <div class="slide-card" data-name="7.png" style="background:url('images/templates/7.png');"></div>
                                   <div class="slide-card" data-name="8.png" style="background:url('images/templates/8.png');"></div>
                                <div class="slide-card" data-name="9.png" style="background:url('images/templates/9.png');"></div>
                                  <div class="slide-card" data-name="10.png" style="background:url('images/templates/10.png');"></div>
                                <div class="slide-card" data-name="11.png" style="background:url('images/templates/11.png');"></div>
                                   <div class="slide-card" data-name="12.png" style="background:url('images/templates/12.png');"></div>
                            <div class="slide-card" data-name="13.png" style="background:url('images/templates/13.png');"></div>
                                 <div class="slide-card" data-name="14.png" style="background:url('images/templates/14.png');"></div>
                                 <div class="slide-card" data-name="15.png" style="background:url('images/templates/15.png');"></div>
                                <div class="slide-card" data-name="16.png" style="background:url('images/templates/16.png');"></div>
                             <div class="slide-card" data-name="17.png" style="background:url('images/templates/17.png');"></div>
                           <div class="slide-card" data-name="18.png" style="background:url('images/templates/18.png');"></div>
                                   <div class="slide-card" data-name="19.png" style="background:url('images/templates/19.png');"></div>
                                    <div class="slide-card" data-name="20.png" style="background:url('images/templates/20.png');"></div>
                                   <div class="slide-card" data-name="21.png" style="background:url('images/templates/21.png');"></div>
                                 <div class="slide-card" data-name="22.png" style="background:url('images/templates/22.png');"></div>
                             <div class="slide-card" data-name="23.png" style="background:url('images/templates/23.png');"></div>
                             <div class="slide-card" data-name="24.png" style="background:url('images/templates/24.png');"></div>
                             <div class="slide-card" data-name="25.png" style="background:url('images/templates/25.png');"></div>
                                <div class="slide-card" data-name="26.png" style="background:url('images/templates/26.png');"></div>
                               <div class="slide-card" data-name="27.png" style="background:url('images/templates/27.png');"></div>
                              <div class="slide-card" data-name="28.png" style="background:url('images/templates/28.png');"></div>
                                  <div class="slide-card" data-name="29.png" style="background:url('images/templates/29.png');"></div>
                                  <div class="slide-card" data-name="30.png" style="background:url('images/templates/30.png');"></div>
                            <div class="slide-card" data-name="31.png" style="background:url('images/templates/31.png');"></div>
                               <div class="slide-card" data-name="32.png" style="background:url('images/templates/32.png');"></div>
                            <div class="slide-card" data-name="33.png" style="background:url('images/templates/33.png');"></div>
                                  <div class="slide-card" data-name="34.png" style="background:url('images/templates/34.png');"></div>
                                <div class="slide-card" data-name="35.png" style="background:url('images/templates/35.png');"></div>
                                <div class="slide-card" data-name="36.png" style="background:url('images/templates/36.png');"></div>
                              <div class="slide-card" data-name="37.png" style="background:url('images/templates/37.png');"></div>
                                <div class="slide-card" data-name="38.png" style="background:url('images/templates/38.png');"></div>
                               <div class="slide-card" data-name="39.png" style="background:url('images/templates/39.png');"></div>
                                 <div class="slide-card" data-name="40.png" style="background:url('images/templates/40.png');"></div>
                                  <div class="slide-card" data-name="41.png" style="background:url('images/templates/41.png');"></div>
                                 <div class="slide-card" data-name="42.png" style="background:url('images/templates/42.png');"></div>
                <div class="slide-card" data-name="43.png" style="background:url('images/templates/43.png');"></div>
                                <div class="slide-card" data-name="44.png" style="background:url('images/templates/44.png');"></div>
                           <div class="slide-card" data-name="45.png" style="background:url('images/templates/45.png');"></div>
             <div class="slide-card" data-name="46.png" style="background:url('images/templates/46.png');"></div>
                                    </div>
                                </div>
                                <span id="nav-right-multi"></span>
                            </div>
                            <div class="row upload-zone" style="display: none">



                            <input type="file" title="Click to add Files" class="file-input">
                                <input type="hidden" class="img" value="<%= datamulti.bgImage %>" />
                                <img src="https://assets.apphero.co/images/loading.gif" width="24" hight="24" class="loading" style="display:none;" />


                                <p class="upload-error"></p>
                                <p>(JPG, PNG or GIF, max size:100kb)</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="section-wrapper">
                            <h6>POSITION</h6>
                            <div class="row">
                                <label>Bar Position:</label>
                                <select class="posSelector">
                                    <option value="top" <%= datamulti.position==="top" ? "selected" : "" %> >Top</option>
                                    <option value="bottom" <%= datamulti.position==="bottom" ? "selected" : "" %> >Bottom</option>
                                    <option value="custom" <%= datamulti.position==="custom" ? "selected" : "" %> >Custom</option>
                                </select>

                            </div>

                            <div class="code-row row" style="display:none;">
                                Copy the tag below and paste it into your theme where you'd like the bar to appear:
                                <a target="_blank" href="https://help.apphero.co/article/31-how-to-insert-the-bar-in-a-custom-location">Learn more</a>
                                <br/><br />
                                <div class="row side-elements markdown">
                                    <div id="markdown-body" class="markdown-body">
                                        &lt;div class='aph_bar_wrapper'&gt;&lt;/div&gt;
                                    </div>
                                    <div class="tooltip">
                                        <button onclick="copyText()" onmouseout="outFunc()">
                                            <span class="tooltiptext" id="myTooltip">Copy</span>
                                            Copy
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <label>
                                    <input type="checkbox" class="posOnTop" <%= datamulti.posOnTop===true ? "checked" : "" %> />
                                    Bar moves with scroll
                                </label>
                            </div>

                        </div>
                        <div class="section-wrapper">
                            <h6>EXTRA FUNCTIONS</h6>
                            <div class="row">
                                <label>
                                    <input class="user_closable" type="checkbox" <%= datamulti.user_closable === true ? "checked" : "" %>/>
                                    Bar can be hidden</label>
                            </div>
                            <div class="row">
                                <label>Hide Button Style:</label>
                                <select class="bar_dismiss_style">
                                    <option value="light" <%= datamulti.bar_dismiss_style==="Light" ? "selected" : "" %>>Light</option>
                                    <option value="dark" <%= datamulti.bar_dismiss_style==="dark" ? "selected" : "" %>>Dark</option>
                                </select>
                            </div>
                        </div>
                    </div>




                </div>
            </div>


            <div class="section-container container-edit">

                <h4 class="locked-heading">Targeting
                </h4>

                <p class="locked-subheading">Show the bar to specific users</p>
                <div class="grid targeting-grid" style="opacity:1;" data-plan="PRO" >
                    <div class="card">
                        <div class="section-wrapper">
                            <h6>Page Targeting</h6>
                            <p>Choose which pages to have the bar</p>
                            <div class="row">
                                <select class="page-target">


                                    <option value="all" <%= datamulti.pageTarget==="all" ? "selected" : "" %>>Show on every page</option>
                                    <option value="home" <%= datamulti.pageTarget==="home" ? "selected" : "" %>>Show on home page only</option>
                                    <option value="collection" <%= datamulti.pageTarget==="collection" ? "selected" : "" %>>Show on collections only</option>
                                    <option value="product" <%= datamulti.pageTarget==="product" ? "selected" : "" %>>Show on products only</option>
                                    <option value="custom" <%= datamulti.pageTarget==="custom" ? "selected" : "" %>>Custom page</option>
                                </select>
                            </div>
                            <div id="customPageRow<%=multidata[i].bar_id%>" class="row customPageRow" style="  <%=  datamulti.pageTarget==="custom"? 'display:block;':'display:none;' %>" >
                                <label>Page URL:</label>
                                <input id="customPageURL<%=multidata[i].bar_id%>" class="customPageURL" name="customPageURL" type="text" />
                                <input type="hidden" id="pageTarget<%=multidata[i].bar_id%>" />
                                <script>
                                    var options = {};
                                    var selected = [];
                                    options["<%=multidata[i].bar_id%>"] = [];
                                    selected["<%=multidata[i].bar_id%>"] = [];
                                    masterPages["<%=multidata[i].bar_id%>"] = [];
                                    masterGeo["<%=multidata[i].bar_id%>"] = [];
                                    masterDomains["<%=multidata[i].bar_id%>"] = [];
                                    /*  */




                                    $(function(){
                                        var $select = $('#customPageURL<%=multidata[i].bar_id%>').selectize({
                                            plugins: ['remove_button'],
                                            create:true,


                                            onInitialize:function() {

                                                let arroptions = <%- datamulti.pageTargetOptions %>
                                                if(arroptions.length>0)
                                                {
                                                    console.log(arroptions)
                                                    for (var i = 0;
                                                         i < arroptions.length; i++) {
                                                        this.addOption({'value':arroptions[i]});
                                                        selected.push(arroptions[i]);
                                                    }

                                                }
                                                this.setValue(selected);
                                            },

                                            onItemAdd:function(value,$item) {
                                                masterPages["<%=multidata[i].bar_id%>"].push(value);
                                            },
                                            onItemRemove:function(value){
                                                var index = masterPages["<%=multidata[i].bar_id%>"].indexOf(value);
                                                if (index !== -1 ) { masterPages["<%=multidata[i].bar_id%>"].splice(index,1); }
                                            },
                                            valueField: 'value',
                                            labelField: 'value',
                                            searchField: 'value',


                                        });

                                        var selectedDomain = [];
                                        var $selectDomain = $('#domain<%=multidata[i].bar_id%>').selectize({
                                            plugins: ['remove_button'],
                                            create:true,


                                            onInitialize:function() {
                                                this.setValue(selectedDomain);

                                            },

                                            onItemAdd:function(value,$item) {
                                                masterDomains["<%=multidata[i].bar_id%>"].push(value);
                                            },
                                            onItemRemove:function(value){
                                                var index = masterDomains["<%=multidata[i].bar_id%>"].indexOf(value);
                                                if (index !== -1 ) { masterDomains["<%=multidata[i].bar_id%>"].splice(index,1); }
                                            },
                                            valueField: 'value',
                                            labelField: 'value',
                                            searchField: 'value',


                                        });

                                        //var selectizes = $select[0].selectize;

                                        //selectizes.setValue(selected);



                                        var somedata
                                        var selectedGeo = [];
                                        var $selectGeo = $('#geo<%=multidata[i].bar_id%>').selectize({
                                            plugins: ['remove_button'],
                                            valueField:'alpha-2',
                                            labelField:'name',
                                            searchField:'name',
                                            onFocus:function() {
                                            },
                                            onInitialize:function() {
                                                somedata= <%- JSON.stringify(datamulti.countryOptions)%>
                                                    console.log(somedata)
                                                somedata = JSON.parse(somedata)
                                                console.log(somedata.length)
                                                if (somedata.length>0) {
                                                    for (let j = 0; j < somedata.length; j++) {
                                                        this.addOption(somedata[j]);
                                                        selectedGeo.push(somedata[j]['alpha-2']);
                                                    }

                                                }
                                                this.setValue(selectedGeo);
                                            },
                                            onChange:function(value,label) {

                                                if (value != "") {
                                                    var arr = value.split(',');
                                                    for (var i=0; i < arr.length;i++) {
                                                        var name = $('[data-value="' + arr[i] + '"]').text();
                                                        name = name.substr(0,name.length-1);
                                                        arr[i] = {'alpha-2':arr[i], 'name':name};

                                                    }
                                                    masterGeo["<%=multidata[i].bar_id%>"] = arr;
                                                }
                                                else {
                                                    masterGeo["<%=multidata[i].bar_id%>"] = [];
                                                }


                                            },
                                            load:function(query, callback) {
                                                if (!query.length) return callback();
                                                $.ajax({
                                                    url: 'https://apphero.co/templates/countries.json',
                                                    type: 'GET',
                                                    dataType: 'json',
                                                    data: {
                                                        name: query,
                                                    },
                                                    error: function() {
                                                        callback();
                                                    },
                                                    success: function(res) {
                                                        callback(res);
                                                    }
                                                });
                                            }
                                        });


                                    });
                                </script>
                            </div>
                        </div>
                        <br/>
                        <div class="section-wrapper">
                            <h6>Subdomain Targeting</h6>
                            <p>Show your bar on specific subdomains</p>
                            <div class="row">
                                <select class="domain-target">
                                    <option value="all" <%= datamulti.domainTarget === "all" ? "selected" : ""  %>>Display on all subdomains</option>
                                    <option value="specific" <%= datamulti.domainTarget === "specific" ? "selected" : ""  %>>Display on specific subdomains</option>
                                    <option value="main" <%= datamulti.domainTarget === "main" ? "selected" : ""  %>>Display on main domain only</option>
                                </select>
                                <div id="subDomainRow<%=multidata[i].bar_id%>" class="row" style="display:none;">
                                    <label>Subdomains: <a href='faq.php' target='_blank'>Learn More</a></label>
                                    <input id="domain<%=multidata[i].bar_id%>" class="domainTarget" value="<%= datamulti.domainTarget %>" name="domainTarget" type="text" />
                                </div>
                            </div>
                        </div>
                        <br/>
                        <div class="section-wrapper">
                            <h6>DEVICE TARGETING</h6>
                            <p>Show the bar on certain device types</p>
                            <div class="row">
                                <input class="cta_radio device_radio" name="device_target-<%=multidata[i].bar_id%>" type="radio" value="0" <%= datamulti.device_target=== 0 ? "checked" : "" %>/>Show on all devices<br/>
                                <input class="cta_radio device_radio" name="device_target-<%=multidata[i].bar_id%>" type="radio" value="1" <%= datamulti.device_target=== 1 ? "checked" : "" %> />Show on desktop only<br/>
                                <input class="cta_radio device_radio" name="device_target-<%=multidata[i].bar_id%>" type="radio" value="2" <%= datamulti.device_target=== 2 ? "checked" : "" %> />Show on mobile only<br/>

                            </div>
                        </div>

                    </div>

                    <div class="card">
                        <div class="section-wrapper">
                            <h6>Geotargeting</h6>
                            <p>Show the bar to people living in certain countries</p>
                            <label>Countries:</label>
                            <input id="geo<%=multidata[i].bar_id%>" class="geoTarget" name="geoTarget" type="text" />
                        </div>
                        <br />
                        <div class="section-wrapper">
                            <h6>User Source Targeting</h6>
                            <p>Show the bar to visitors coming from a specific website</p>
                            <div class="row">
                                <label>Source:</label>
                                <select class="user_source">
                                    <option value="disabled" <%= datamulti.source_mode==="disabled" ? "selected" : "" %>  >All Sources</option>
                                    <option value="facebook.com"  <%= datamulti.source_mode==="facebook.com" ? "selected" : "" %>  >Facebook</option>
                                    <option value="instagram.com"  <%= datamulti.source_mode==="instagram.com" ? "selected" : "" %>  >Instagram</option>
                                    <option value="t.co"   <%= datamulti.source_mode==="t.co" ? "selected" : "" %>  >Twitter</option>
                                    <option value="google.com"  <%= datamulti.source_mode==="google.com" ? "selected" : "" %>  >Google</option>
                                    <option value="pinterest.com"  <%= datamulti.source_mode==="pinterest.com" ? "selected" : "" %>  >Pinterest</option>
                                    <option value="custom"  <%= datamulti.source_mode==="custom" ? "selected" : "" %>>Custom URL</option>
                                    <option value="utm"  <%= datamulti.source_mode==="utm" ? "selected" : "" %>>UTM Code</option>
                                </select>
                            </div>
                            <div class="row utm_row">
                                <label>UTM Code</label>
                                <input class="utm_val" name="utm_val" type="text" placeholder="ex:utm_source=email"/>
                            </div>
                            <div class="row source_url_row">
                                <label>UTM Code</label>
                                <input class="source_url" name="source_url" type="text" placeholder="domain.com"/>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="btns-container">
                <!--<button class="button btn-save" >Update</button>-->
                <button type="button" class="btn-save Polaris-Button Polaris-Button--primary"><span class="Polaris-Button__Content">
<span>Save</span></span></button>
                <button class="secondary btn-cancel">Cancel</button>

            </div>
        </div>
        <input type="hidden" class="" value="<%= multidata[i].bar_id %>" />
    </section>
    <% } %>

    <section class="rate-view" style="display:none;">
        <div class="card">
            <span class="rate_close">x</span>
            <h4><span>❤</span> Enjoying this app?</h4>
            <article>
                <div class="column ten">Please leave us a quick review in the app store.
                    Each review helps us tremendously!  If you have any feedback on how to improve the app,
                    <a target="_top" href="mailto:contact@apphero.co">please let us a know.</a></div>
                <div class="column one">
                    <a class="button add_review">Rate on App Store</a>
                </div>
            </article>
        </div>
    </section>
    <footer>

    </footer>
</div>





<div id="delete_modal" class="mod">
    <h4 class="delete-mod_title">Are you sure?</h4>
    <hr/>
    <div class="row delete-mod_row">
        <label>Do you want to delete this bar? This can't be undone.</label>

    </div>
    <hr/>
    <div class="row">
        <button class="button primary delete-mod_confirm warning">Yes</button>
        <a href="#name_modal" rel="mod:close"><button class="button secondary delete-mod_cancel">No</button></a>


    </div>
    <input type="hidden" id="removeId" value=""/>
</div>


</div>

<div id="messageElement_modal" class="mod">
    <h4 class="messageElement-mod_title">Delete message?</h4>
    <hr/>
    <div class="row messageElement-mod_row">
        <label>Are you sure you want to delete this message?</label>

    </div>
    <hr/>
    <div class="row">
        <button class="button primary messageElement-mod_confirm warning">Yes</button>
        <a href="#messageElement_modal" rel="mod:close"><button class="button secondary messageElement-mod_cancel">No</button></a>


    </div>
    <input type="hidden" id="elementId" value=""/>
    <input type="hidden" id="elementIndex" value="" />

</div>



</body>
</html>
